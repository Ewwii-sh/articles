<!DOCTYPE html><html lang="en" data-astro-cid-euekwpw5> <head><!-- Global Metadata --><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" type="image/svg+xml" href="/EwwiiLogo.png"><link rel="sitemap" href="/sitemap-index.xml"><link rel="alternate" type="application/rss+xml" title="Ewwii Articles" href="https://ewwii-sh.github.io/rss.xml"><meta name="generator" content="Astro v5.13.7"><!-- Font preloads --><link rel="preload" href="/articles/fonts/atkinson-regular.woff" as="font" type="font/woff" crossorigin><link rel="preload" href="/articles/fonts/atkinson-bold.woff" as="font" type="font/woff" crossorigin><!-- Canonical URL --><link rel="canonical" href="https://ewwii-sh.github.io/articles/en/guide_to_gtk4/"><!-- Primary Meta Tags --><title>Ewwii v0.3.0: Introduction of GTK4</title><meta name="title" content="Ewwii v0.3.0: Introduction of GTK4"><meta name="description" content="A full explanation of what changes have occoured."><!-- Open Graph / Facebook --><meta property="og:type" content="website"><meta property="og:url" content="https://ewwii-sh.github.io/articles/en/guide_to_gtk4/"><meta property="og:title" content="Ewwii v0.3.0: Introduction of GTK4"><meta property="og:description" content="A full explanation of what changes have occoured."><meta property="og:image" content="https://ewwii-sh.github.io/articles/_astro/blog-placeholder-1.Bx0Zcyzv.jpg"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://ewwii-sh.github.io/articles/en/guide_to_gtk4/"><meta property="twitter:title" content="Ewwii v0.3.0: Introduction of GTK4"><meta property="twitter:description" content="A full explanation of what changes have occoured."><meta property="twitter:image" content="https://ewwii-sh.github.io/articles/_astro/blog-placeholder-1.Bx0Zcyzv.jpg"><style>:root{--accent: #2337ff;--accent-dark: #000d8a;--black: 15, 18, 25;--gray: 96, 115, 159;--gray-light: 229, 233, 240;--gray-dark: 34, 41, 57;--gray-gradient: rgba(var(--gray-light), 50%), #fff;--box-shadow: 0 2px 6px rgba(var(--gray), 25%), 0 8px 24px rgba(var(--gray), 33%), 0 16px 32px rgba(var(--gray), 33%)}@font-face{font-family:Atkinson;src:url(/articles/fonts/atkinson-regular.woff) format("woff");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:Atkinson;src:url(/articles/fonts/atkinson-bold.woff) format("woff");font-weight:700;font-style:normal;font-display:swap}body{font-family:Atkinson,sans-serif;margin:0;padding:0;text-align:left;background:linear-gradient(var(--gray-gradient)) no-repeat;background-size:100% 600px;word-wrap:break-word;overflow-wrap:break-word;color:rgb(var(--gray-dark));font-size:20px;line-height:1.7}main{width:720px;max-width:calc(100% - 2em);margin:auto;padding:3em 1em}h1,h2,h3,h4,h5,h6{margin:0 0 .5rem;color:rgb(var(--black));line-height:1.2}h1{font-size:3.052em}h2{font-size:2.441em}h3{font-size:1.953em}h4{font-size:1.563em}h5{font-size:1.25em}strong,b{font-weight:700}a,a:hover{color:var(--accent)}p{margin-bottom:1em}.prose p{margin-bottom:2em}textarea{width:100%;font-size:16px}input{font-size:16px}table{width:100%}img{max-width:100%;height:auto;border-radius:8px}code{padding:2px 5px;background-color:rgb(var(--gray-light));border-radius:2px}pre{padding:1.5em;border-radius:8px}pre>code{all:unset}blockquote{border-left:4px solid var(--accent);padding:0 0 0 20px;margin:0;font-size:1.333em}hr{border:none;border-top:1px solid rgb(var(--gray-light))}@media (max-width: 720px){body{font-size:18px}main{padding:1em}}.sr-only{border:0;padding:0;margin:0;position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);clip-path:inset(50%);white-space:nowrap}footer[data-astro-cid-sz7xmlte]{padding:2em 1em 6em;background:linear-gradient(var(--gray-gradient)) no-repeat;color:rgb(var(--gray));text-align:center}.social-links[data-astro-cid-sz7xmlte]{display:flex;justify-content:center;gap:1em;margin-top:1em}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]{text-decoration:none;color:rgb(var(--gray))}.social-links[data-astro-cid-sz7xmlte] a[data-astro-cid-sz7xmlte]:hover{color:rgb(var(--gray-dark))}a[data-astro-cid-eimmu3lg]{display:inline-block;text-decoration:none}a[data-astro-cid-eimmu3lg].active{font-weight:bolder;text-decoration:underline}header[data-astro-cid-3ef6ksr2]{margin:0;padding:0 1em;background:#fff;box-shadow:0 2px 8px rgba(var(--black),5%)}h2[data-astro-cid-3ef6ksr2]{margin:0;font-size:1em}h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2],h2[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none}nav[data-astro-cid-3ef6ksr2]{display:flex;align-items:center;justify-content:space-between}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{padding:1em .5em;color:var(--black);border-bottom:4px solid transparent;text-decoration:none}nav[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2].active{text-decoration:none;border-bottom-color:var(--accent)}.social-links[data-astro-cid-3ef6ksr2],.social-links[data-astro-cid-3ef6ksr2] a[data-astro-cid-3ef6ksr2]{display:flex}@media (max-width: 720px){.social-links[data-astro-cid-3ef6ksr2]{display:none}}
main[data-astro-cid-euekwpw5]{width:calc(100% - 2em);max-width:100%;margin:0}.prose[data-astro-cid-euekwpw5]{width:720px;max-width:calc(100% - 2em);margin:auto;padding:1em;color:rgb(var(--gray-dark))}.title[data-astro-cid-euekwpw5]{margin-bottom:1em;padding:1em 0;text-align:center;line-height:1}.title[data-astro-cid-euekwpw5] h1[data-astro-cid-euekwpw5]{margin:0 0 .5em}.date[data-astro-cid-euekwpw5]{margin-bottom:.5em;color:rgb(var(--gray))}.last-updated-on[data-astro-cid-euekwpw5]{font-style:italic}
</style></head> <body data-astro-cid-euekwpw5> <header data-astro-cid-3ef6ksr2> <nav data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2><a href="/articles/" data-astro-cid-3ef6ksr2>Ewwii Articles</a></h2> <div class="internal-links" data-astro-cid-3ef6ksr2> <a href="/articles/" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Home </a>  <a href="/articles/en" class="active" data-astro-cid-3ef6ksr2="true" data-astro-cid-eimmu3lg> Articles </a>  </div> <div class="social-links" data-astro-cid-3ef6ksr2> <a href="https://github.com/Ewwii-sh/" target="_blank" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Ewwii's GitHub org</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-3ef6ksr2></path></svg> </a> <a href="/" target="_self" data-astro-cid-3ef6ksr2> <span class="sr-only" data-astro-cid-3ef6ksr2>Go to Home</span> <svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32" data-astro-cid-3ef6ksr2> <path fill="currentColor" d="M12 3l8 8h-3v7h-10v-7H4l8-8zm0-2L2 12h3v8h6v-6h2v6h6v-8h3L12 1z" data-astro-cid-3ef6ksr2></path> </svg> </a> </div> </nav> </header>  <main data-astro-cid-euekwpw5> <article data-astro-cid-euekwpw5> <div class="prose" data-astro-cid-euekwpw5> <div class="title" data-astro-cid-euekwpw5> <div class="date" data-astro-cid-euekwpw5> <time datetime="2025-10-04T19:53:00.000Z"> Oct 4, 2025 </time>  </div> <h1 data-astro-cid-euekwpw5>Ewwii v0.3.0: Introduction of GTK4</h1> <hr data-astro-cid-euekwpw5> </div>  <p>Ewwii v0.3.0 marks a new beginning where ewwii is faster, more performant, and more animatable. But everything comes with its own pros and cons. This article goes into detail on this release, on new issues, and on recommended things that you can do to mitigate these new issues.</p>
<h2 id="release-overview">Release Overview</h2>
<p>First of all, let’s get into the release. Not all the changes are listed here, but the important are.</p>
<h2 id="new-features">New Features</h2>
<h3 id="can_target-property"><code>can_target</code> property</h3>
<p>A new property called <code>can_target</code> has been introduced to all widgets. This property which makes it unable to receive pointer / targetable events.</p>
<h3 id="icon-widget"><code>icon</code> widget</h3>
<p>A new widget which maintains 1:1 ratio no matter what. It is particularly useful when the user has to show icons that doesn’t automatically resize to fit the full container.</p>
<h2 id="changed-features">Changed Features</h2>
<h3 id="dynamic-updates">Dynamic updates</h3>
<p>The dynamic runtime engine’s widget creation / removal logic has been tweaked to match the new GTK4 expectations. As a widget cannot be downcasted to a container, the type of the widget is now matched against a list of container widgets and the supposed function is executed.</p>
<h3 id="window-positioning-logic">Window positioning logic</h3>
<p>GTK4 removed the ability to move a window for cross-platform compatibilty but it is a kick to the guts in ewwii as it relies on these logic.</p>
<p>No changes were needed for the wayland backend as the window positioning logic is handled by the wlr-layer-shell protocol. But X11 requires a message to the X11 server for it to position a window. Hence, the window positioning logic has moved to a function that manually sends a request to the X11 server.</p>
<h3 id="eventbox-widget">EventBox widget</h3>
<p>The eventbox widget has been fully rewritten to match GTK4 expectations. In GTK4, there is actually no eventbox widget as there are controllers which can be attached to any widget. However, adding an option to add controllers to every single widget will be hard to maintain and hence ewwii retains an eventbox widget that is just a box with controllers attached.</p>
<h3 id="initialization-logic-of-windows">Initialization logic of windows</h3>
<p>The intialization logic of windows changed from asking GTK to create the window and position it to an x, y coordinate to just asking GTK to create the window. This change is done as we are handling the positioning logic after the initialization of the windows.</p>
<h2 id="removed-features">Removed Features</h2>
<h3 id="css-class-on-the-windows">CSS class on the windows</h3>
<p>Previously, ewwii attached the name of the window as the window’s and its root child’s css class. This has been done as GTK4 seems to be causing unexpected behaviour with applying CSS that changes layout on X11.</p>
<p>Now only the root child inherits a css class that is the name of its parent window as it ensures compatibility across wayland and x11.</p>
<p>This change doesn’t break anything as styling the root child works exactly as styling the root window.</p>
<h3 id="icon_name-property-from-image-widget"><code>icon_name</code> property from <code>image</code> widget</h3>
<p>The <code>icon_name</code> property has been removed from the <code>image</code> widget i nfavour of the <code>icon</code> widget. This property is accessable on the <code>icon</code> widget.</p>
<h3 id="same_size-property-from-stack-widget"><code>same_size</code> property from stack widget</h3>
<p>GTK4 removed the underlying API that is called by this property and ewwii had no option other than removing it. The <code>box</code> widget already allows doing the same thing and this widget can be used as a replacement.</p>
<h3 id="icon_size-property-from-image-widget"><code>icon_size</code> property from image widget</h3>
<p>GTK4 also removed the underlying API that this property relies on. CSS can be used instead of setting the size of the image widget instead.</p>
<h3 id="centerbox-widget">Centerbox widget</h3>
<p>The <code>centerbox</code> widget has also been removed as a part of the migration to GTK4 as a <code>box</code> can be used to implement the same functionality.</p>
<h2 id="the-new-issues">The New Issues</h2>
<p>Migrating a full GTK3 based application to GTK4 comes with a lot of issues and of course, Ewwii now has new problems.</p>
<h3 id="resource-usage">Resource Usage</h3>
<p>GTK4 is GPU accelerated and thus needs more resources to set up. Moreover, the rendering backends also use a lot of resources due to the new changes. In testings, RAM usage has been found to spike to around 200MB very easily on certain hardware.</p>
<p>This is a massive trade off for the new performance and hot startup boosts ewwii previous had and posses a great challenge towards the lightweight nature of ewwii.</p>
<h4 id="the-solution">The solution</h4>
<p>Luckly, there is a solution to this problem. GTK4 allows switching the GSK backends. So, this means that we can use the old cario based backend (which now also benifits from GPU acceleration) to get a stable resource usage.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#E1E4E8">GSK_RENDERER</span><span style="color:#F97583">=</span><span style="color:#9ECBFF">cairo</span><span style="color:#B392F0"> ewwii</span><span style="color:#9ECBFF"> open</span><span style="color:#9ECBFF"> foo</span></span></code></pre>
<p>This command can be used to set the rendering backend to cario and get a stable resource usage with reasonable RAM usage until ewwii moves to its own custom renderer which is planned to be developed in the near future.</p>
<h3 id="x11-compatibility">X11 Compatibility</h3>
<p>Another critical issue that may make ewwii unreliable on X11 in the future. GTK4 is built with wayland in mind and it is clearly reflected by the removal of X11 related functions.</p>
<p>One of the major problems while porting ewwii to GTK4 was GTK4 didn’t have those convinient GTK3 features that send requests to the X11 server to perform actions like making a window sticky.</p>
<p>However, ewwii aims to keep its compatible nature by manually implementing each one of those convinient features that GTK3 had. Most of the time of porting to GTK4 was spend on this as the window creation architecture had to be changed completely.</p>
<h2 id="conclusion">Conclusion</h2>
<p>The migration to GTK4 is a major architectural change that breaks some compatibility with the previous versions. Even though this migration introduced increased resource usage, ewwii is actively being developed to be as light as possible without scarificing any of its features.</p>  </div> </article> </main> <footer data-astro-cid-sz7xmlte>
&copy; 2025 Ewwii. All rights reserved.
<div class="social-links" data-astro-cid-sz7xmlte> <a href="https://github.com/Ewwii-sh/" target="_blank" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Ewwii's GitHub org</span> <svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32" data-astro-cid-sz7xmlte><path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-sz7xmlte></path></svg> </a> <a href="/" target="_self" data-astro-cid-sz7xmlte> <span class="sr-only" data-astro-cid-sz7xmlte>Go to Home</span> <svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32" data-astro-cid-sz7xmlte> <path fill="currentColor" d="M12 3l8 8h-3v7h-10v-7H4l8-8zm0-2L2 12h3v8h6v-6h2v6h6v-8h3L12 1z" data-astro-cid-sz7xmlte></path> </svg> </a> </div> </footer>  </body></html>